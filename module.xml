<module>
	<rawname>contactmanager</rawname>
	<repo>standard</repo>
	<name>Contact Manager</name>
	<version>15.0.8.8</version>
	<publisher>Sangoma Technologies Corporation</publisher>
	<license>GPLv3+</license>
	<licenselink>http://www.gnu.org/licenses/gpl-3.0.txt</licenselink>
	<changelog>
		*15.0.8.8* Bump
		*15.0.8.7* FREEPBX-19580 
		*15.0.8.6* Add feature codes to backup
		*15.0.8.5* fixing legacy restore
		*15.0.8.4* fixing legacy restore
		*15.0.8.3* fixing legacy restore
		*15.0.8.2* FREEPBX-18912 Unable to remove the XMPP, Email and Website details under contact manager once the details is filled and submitted
		*15.0.8.1* FREEPBX-18963
		*15.0.8* Support hooks for contact images
		*15.0.7* Fixing FREEPBX-18843 Bulkhandler contact import fields issue
		*15.0.6* FREEPBX-18427 Speed dials for external contacts disappear when contact manager is updated
		*15.0.5* FREEPBX-17601
		*15.0.4* Rest Api
		*15.0.3* Packaging of ver 15.0.3
		*15.0.2* FREEPBX-17663 Import contacts not showing in contact manager
		*15.0.1* Impliment 15 backup
	</changelog>
	<category>Admin</category>
	<description>
		Contact Manager
	</description>
	<menuitems>
		<contactmanager needsenginedb="yes">Contact Manager</contactmanager>
	</menuitems>
	<depends>
		<version>14.0.0</version>
		<module>userman ge 13.0.70</module>
	</depends>
	<supported>
		<version>15.0</version>
	</supported>
	<hooks>
		<bulkhandler class="Bulkhandler" namespace="FreePBX\modules">
			<method callingMethod="getHeaders" class="Contactmanager" namespace="FreePBX\modules">bulkhandlerGetHeaders</method>
			<method callingMethod="getTypes" class="Contactmanager" namespace="FreePBX\modules">bulkhandlerGetTypes</method>
			<method callingMethod="import" class="Contactmanager" namespace="FreePBX\modules">bulkhandlerImport</method>
			<method callingMethod="export" class="Contactmanager" namespace="FreePBX\modules">bulkhandlerExport</method>
		</bulkhandler>
	<userman class="Userman" namespace="FreePBX\modules">
			<method callingMethod="delGroup" class="Contactmanager" namespace="FreePBX\modules">usermanDelGroup</method>
			<method callingMethod="addGroup" class="Contactmanager" namespace="FreePBX\modules">usermanAddGroup</method>
			<method callingMethod="updateGroup" class="Contactmanager" namespace="FreePBX\modules">usermanUpdateGroup</method>
			<method callingMethod="delUser" class="Contactmanager" namespace="FreePBX\modules">usermanDelUser</method>
			<method callingMethod="addUser" class="Contactmanager" namespace="FreePBX\modules">usermanAddUser</method>
			<method callingMethod="updateUser" class="Contactmanager" namespace="FreePBX\modules">usermanUpdateUser</method>
			<method callingMethod="myShowPage" class="Contactmanager" namespace="FreePBX\modules">usermanShowPage</method>
			<method callingMethod="getExtraUserDetailsDisplay" class="Contactmanager" namespace="FreePBX\modules">usermanUserDetails</method>
			<method callingMethod="getExtraContactInfo" class="Contactmanager" namespace="FreePBX\modules">usermanAddContactInfo</method>
		</userman>
		<ucp class="Ucp">
			<method callingMethod="constructModuleConfigPages" class="Contactmanager" namespace="FreePBX\modules">ucpConfigPage</method>
			<method callingMethod="addUser" class="Contactmanager" namespace="FreePBX\modules">ucpAddUser</method>
			<method callingMethod="updateUser" class="Contactmanager" namespace="FreePBX\modules">ucpUpdateUser</method>
			<method callingMethod="delUser" class="Contactmanager" namespace="FreePBX\modules">ucpDelUser</method>
			<method callingMethod="addGroup" class="Contactmanager" namespace="FreePBX\modules">ucpAddGroup</method>
			<method callingMethod="updateGroup" class="Contactmanager" namespace="FreePBX\modules">ucpUpdateGroup</method>
			<method callingMethod="delGroup" class="Contactmanager" namespace="FreePBX\modules">ucpDelGroup</method>
		</ucp>
	</hooks>
	<database>
		<table name="contactmanager_groups">
			<field name="id" type="integer" primaryKey="true" autoincrement="true"/>
			<field name="owner" type="integer"/>
			<field name="name" type="string" length="80"/>
			<field name="type" type="string" length="25"/>
		</table>
		<table name="contactmanager_group_entries">
            <field name="id" type="integer" primarykey="true" autoincrement="true"/>
            <field name="groupid" type="integer"/>
            <field name="user" type="integer"/>
            <field name="displayname" type="string" length="100" default=""/>
            <field name="fname" type="string" length="100" default=""/>
            <field name="lname" type="string" length="100" default=""/>
            <field name="title" type="string" length="100" default=""/>
            <field name="company" type="string" length="100" default=""/>
            <field name="address" type="string" length="200" default=""/>
            <field name="uuid" type="string" length="36" notnull="false"/>
            <key name="uuid_index" type="unique">
            <column name="uuid"/>
            </key>
	    </table>
		<table name="contactmanager_entry_speeddials">
			<field name="id" type="integer" primaryKey="true"/>
			<field name="entryid" type="integer"/>
			<field name="numberid" type="integer"/>
		</table>
		<table name="contactmanager_entry_numbers">
			<field name="id" type="integer" primaryKey="true" autoincrement="true"/>
            <field name="entryid" type="integer"/>
            <field name="number" type="string" length="100" notnull="false"/>
            <field name="extension" type="string" length="100" notnull="false"/>
            <field name="countrycode" type="string" length="4" notnull="false"/>
            <field name="nationalnumber" type="string" length="100" notnull="false"/>
            <field name="regioncode" type="string" length="2" notnull="false"/>
			<field name="locale" type="string" length="2" notnull="false"/>
			<field name="stripped" type="string" length="100" notnull="false"/>
    	    <field name="type" type="string" length="100" notnull="false"/>
	        <field name="flags" type="string" length="100" notnull="false"/>
	        <field name="E164" type="string" length="100" notnull="false"/>
			<field name="possibleshort" type="boolean" notnull="false"/>
		</table>
		<table name="contactmanager_entry_images">
			<field name="entryid" type="integer" primaryKey="true"/>
			<field name="image" type="blob" notnull="false"/>
			<field name="format" type="string" length="45"/>
			<field name="gravatar" type="boolean" default="0"/>
		</table>
		<table name="contactmanager_entry_userman_images">
			<field name="uid" type="integer" primaryKey="true"/>
			<field name="image" type="blob" notnull="false"/>
			<field name="format" type="string" length="45"/>
			<field name="gravatar" type="boolean" default="0"/>
		</table>
		<table name="contactmanager_entry_xmpps">
			<field name="id" type="integer" primaryKey="true" autoincrement="true"/>
			<field name="entryid" type="integer"/>
			<field name="xmpp" type="string" length="100" notnull="false"/>
		</table>
		<table name="contactmanager_entry_emails">
			<field name="id" type="integer" primaryKey="true" autoincrement="true"/>
			<field name="entryid" type="integer"/>
			<field name="email" type="string" length="100" notnull="false"/>
		</table>
		<table name="contactmanager_entry_websites">
			<field name="id" type="integer" primaryKey="true" autoincrement="true"/>
			<field name="entryid" type="integer"/>
			<field name="website" type="string" length="100" notnull="false"/>
		</table>
	</database>
</module>
